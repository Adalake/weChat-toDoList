"use strict";
var util = require("../../utils/util.js");
var app = getApp();
var context;
Page({
    data: {
        motto: "to do list",
        userInfo: {},
        hasUserInfo: false,
        canIUse: wx.canIUse("button.open-type.getUserInfo"),
        addShow: false,
        addText: "",
        status: "1",
        focus: false,
        lists: [],
        curLists: [],
        books: [],
        editIndex: 0,
        delBtnWidth: 120,
        curDay: "",
        addUserInfo: "",
        studyStatus: 0,
        lastId: "",
        userId: "",
        user2List: [],
        user3List: [],
    },
    studyDone: function () {
        var db = wx.cloud.database();
        if (context.data.studyStatus === 0) {
            context.setData({
                studyStatus: 1,
            });
            db.collection("todolist").add({
                data: {
                    done: true,
                    userId: context.data.userId,
                    curDay: context.data.curDay,
                },
                success: function (res) {
                    context.setData({
                        lastId: res["_id"],
                    }),
                        wx.showToast({
                            title: "今日学习打卡",
                        });
                },
            });
        }
        else {
            wx.showModal({
                title: "删除今天的打卡",
                content: "您确定要删除今天的打卡吗？",
                confirmText: "确认删除",
                cancelText: "取消",
                success: function (res) {
                    if (res.confirm) {
                        db
                            .collection("todolist")
                            .doc(context.data.lastId)
                            .remove({
                            success: function () {
                                wx.showToast({
                                    title: "删除成功",
                                });
                            },
                        }),
                            context.setData({
                                studyStatus: 0,
                            });
                        console.log("用户确认删除");
                    }
                    else {
                        console.log("用户取消了操作");
                    }
                },
            });
        }
    },
    showLog: function () {
        var db = wx.cloud.database();
        db.collection("todolist").get({
            success: function (e) {
                console.log(e.data.filter(function (x) { return x["userId"] === "test 3"; }));
                context.setData({
                    user2List: e.data.filter(function (x) { return x["userId"] === "test 2"; }),
                    user3List: e.data.filter(function (x) { return x["userId"] === "test 3"; }),
                });
            },
        });
    },
    bindViewTap: function () {
        wx.navigateTo({
            url: "../logs/logs",
        });
    },
    onLoad: function () {
        var _this = this;
        context = this;
        var db = wx.cloud.database();
        wx.getStorage({
            key: "userId",
            success: function (e) {
                context.setData({
                    userId: e.data,
                }),
                    console.log(e.data, "存入本地的userId");
                db.collection("todolist")
                    .where({ userId: e.data })
                    .get({
                    success: function (e) {
                        console.log(e, "不同的userId");
                        if (e.data[e.data.length - 1]["curDay"] === getDay) {
                            context.setData({
                                studyStatus: 1,
                                lastId: e.data[e.data.length - 1]["_id"],
                            });
                        }
                    },
                });
            },
        });
        var time = util.formatTime(new Date());
        var getDay = time.split(" ")[0];
        this.setData({
            curDay: getDay,
        });
        console.log(context.curDay, "today");
        wx.getStorage({
            key: "lists",
            success: function (res) {
                console.log(res.data);
                context.setData({
                    lists: res.data,
                    curLists: res.data,
                });
            },
        });
        if (app.globalData.userInfo) {
            this.setData({
                userInfo: app.globalData.userInfo,
                hasUserInfo: true,
            });
        }
        else if (this.data.canIUse) {
            app.userInfoReadyCallback = function (res) {
                _this.setData({
                    userInfo: res.userInfo,
                    hasUserInfo: true,
                });
            };
        }
        else {
            wx.getUserInfo({
                success: function (res) {
                    app.globalData.userInfo = res.userInfo;
                    _this.setData({
                        userInfo: res.userInfo,
                        hasUserInfo: true,
                    });
                },
            });
        }
    },
    getUserInfo: function (e) {
        app.globalData.userInfo = e.detail.userInfo;
        this.setData({
            userInfo: e.detail.userInfo,
            hasUserInfo: true,
        });
    },
    addTodoShow: function () {
        context.setData({
            addShow: true,
            focus: true,
        });
    },
    addTodo: function () {
        if (!context.data.addText.trim()) {
            return;
        }
        var temp = context.data.lists;
        var addT = {
            id: new Date().getTime(),
            title: context.data.addText,
            status: "0",
        };
        temp.push(addT);
        context.showCur(temp);
        context.addTodoHide();
        wx.setStorage({
            key: "lists",
            data: temp,
        });
        wx.showToast({
            title: "添加成功! 23",
            icon: "success",
            duration: 1000,
        });
    },
    addTodoHide: function () {
        context.setData({
            addShow: false,
            focus: false,
            addText: "",
        });
    },
    showCur: function (data) {
        if (data.status === "1") {
            context.setData({
                lists: data,
                curLists: data,
            });
        }
        else {
            context.setData({
                lists: data,
                curLists: data.filter(function (item) { return +item.status === context.data.status - 2; }),
            });
        }
    },
    changeTodo: function (e) {
        var item = e.currentTarget.dataset.item;
        var temp = context.data.lists;
        temp.forEach(function (el) {
            if (el.id === item) {
                if (el.status === "0") {
                    el.status = "1";
                    context.showCur(temp);
                    wx.setStorage({
                        key: "lists",
                        data: temp,
                    });
                    wx.showToast({
                        title: "已完成任务",
                        icon: "success",
                        duration: 1000,
                    });
                }
                else {
                    wx.showModal({
                        title: "",
                        content: "该任务已完成，确定重新开始任务？",
                        confirmText: "确定",
                        cancelText: "不了",
                        success: function (res) {
                            if (res.confirm) {
                                el.status = "0";
                                context.showCur(temp);
                                wx.setStorage({
                                    key: "lists",
                                    data: temp,
                                });
                            }
                            else {
                                return console.log("不操作");
                            }
                        },
                    });
                }
            }
        });
        console.log(item);
    },
    setInput: function (e) {
        context.setData({
            addText: e.detail.value,
        });
    },
    setUser: function (e) {
        context.setData({
            addUserInfo: e.detail.value,
        });
    },
    addUser: function () {
        var db = wx.cloud.database();
        console.log(context.data.addUserInfo);
        if (context.data.addUserInfo === "test 2")
            db.collection("todolist").add({
                data: {
                    openid: context.data.addUserInfo,
                    done: true,
                    curDay: context.data.curDay,
                },
                success: function () {
                    wx.showToast({
                        title: "邀请码验证成功",
                    });
                },
            });
    },
    showStatus: function (e) {
        var st = e.currentTarget.dataset.status;
        if (context.data.status === st)
            return;
        if (st === "1") {
            context.setData({
                status: st,
                curLists: context.data.lists,
            });
            return;
        }
        context.setData({
            status: st,
            curLists: context.data.lists.filter(function (item) { return +item.status === st - 2; }),
        });
    },
    delTodo: function (e) {
        var item = e.currentTarget.dataset.item;
        var temp = context.data.lists;
        temp.forEach(function (el, index) {
            if (el.id === item) {
                temp[index].txtStyle = "left:0";
                wx.showModal({
                    title: "",
                    content: "您确定要删除吗？",
                    confirmText: "确定",
                    cancelText: "考虑一下",
                    success: function (res) {
                        if (res.confirm) {
                            temp.splice(index, 1);
                            context.showCur(temp);
                            wx.setStorage({
                                key: "lists",
                                data: temp,
                            });
                        }
                        else {
                            context.showCur(temp);
                            return console.log("不操作");
                        }
                    },
                });
            }
        });
    },
    touchS: function (e) {
        if (e.touches.length === 1) {
            context.setData({
                startX: e.touches[0].clientX,
            });
        }
    },
    touchM: function (e) {
        if (e.touches.length === 1) {
            var moveX = e.touches[0].clientX;
            var disX = context.data.startX - moveX;
            var delBtnWidth = context.data.delBtnWidth;
            var txtStyle = "";
            if (disX == 0 || disX < 0) {
                txtStyle = "left:0";
            }
            else if (disX > 0) {
                txtStyle = "left:-" + disX + "rpx";
                if (disX >= delBtnWidth) {
                    txtStyle = "left:-" + delBtnWidth + "rpx";
                }
            }
            var index = e.currentTarget.dataset.index;
            var list = context.data.curLists;
            list[index].txtStyle = txtStyle;
            context.setData({
                curLists: list,
            });
        }
    },
    touchE: function (e) {
        if (e.changedTouches.length === 1) {
            var endX = e.changedTouches[0].clientX;
            var disX = context.data.startX - endX;
            var delBtnWidth = context.data.delBtnWidth;
            var txtStyle = disX > delBtnWidth / 2 ? "left:-" + delBtnWidth + "rpx" : "left:0";
            var index = e.currentTarget.dataset.index;
            var list = context.data.curLists;
            list[index].txtStyle = txtStyle;
            context.setData({
                curLists: list,
            });
        }
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBU0EsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFFMUMsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFjLENBQUM7QUFDakMsSUFBSSxPQUFZLENBQUM7QUFDakIsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osS0FBSyxFQUFFLFlBQVk7UUFDbkIsUUFBUSxFQUFFLEVBQUU7UUFDWixXQUFXLEVBQUUsS0FBSztRQUNsQixPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQztRQUNuRCxPQUFPLEVBQUUsS0FBSztRQUNkLE9BQU8sRUFBRSxFQUFFO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxLQUFLLEVBQUUsS0FBSztRQUNaLEtBQUssRUFBRSxFQUFtQjtRQUMxQixRQUFRLEVBQUUsRUFBRTtRQUNaLEtBQUssRUFBRSxFQUFFO1FBQ1QsU0FBUyxFQUFFLENBQUM7UUFDWixXQUFXLEVBQUUsR0FBRztRQUNoQixNQUFNLEVBQUUsRUFBRTtRQUNWLFdBQVcsRUFBRSxFQUFFO1FBQ2YsV0FBVyxFQUFFLENBQUM7UUFDZCxNQUFNLEVBQUUsRUFBRTtRQUNWLE1BQU0sRUFBRSxFQUFFO1FBQ1YsU0FBUyxFQUFFLEVBQUU7UUFDYixTQUFTLEVBQUUsRUFBRTtLQUNkO0lBR0QsU0FBUyxFQUFFO1FBQ1QsSUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMvQixJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsRUFBRTtZQUNsQyxPQUFPLENBQUMsT0FBTyxDQUFDO2dCQUNkLFdBQVcsRUFBRSxDQUFDO2FBQ2YsQ0FBQyxDQUFDO1lBQ0gsRUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUM7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Q0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1lBRXZDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUN0QyxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUUzQyxJQUFJLFFBQVEsR0FDVixJQUFJLEdBQUcsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxHQUFHLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUVyRSxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7WUFDMUMsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7WUFFaEMsT0FBTyxDQUFDLE9BQU8sQ0FBQztnQkFDZCxRQUFRLEVBQUUsSUFBSTthQUNmLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGluZGV4LnRzXG4vLyDojrflj5blupTnlKjlrp7kvotcblxuLy8gVE9ETyBzdGVwIDA6IOi+k+WFpemCgOivt+eggemqjOivge+8jOi/meagt+WwseWPr+S7peaMiemCgOivt+eggeaLieWHuuivpeeUqOaIt+eahOaJk+WNoeaXtumXtFxuLy8gVE9ETyBzdGVwIDE6IOaJk+WLvu+8jOWQkeaVsOaNruW6k+aPkuWFpeS4gOadoea2iOaBr1xuLy8gVE9ETyBzdGVwIDI6IOS7juaVsOaNruW6k+afpeivouaJgOaciea2iOaBr++8jOW5tuWxleekuuWIsOmhtemdolxuXG4vLyBUT0RPIHN0ZXAgMzog6aqM6K+B5b2T5YmN5pel5pyf5ZKMdXNlcklkXG4vLyBUT0RPIHN0ZXAgNDog5bGV56S65omA5pyJ55So5oi355qE5pWw5o2uXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy91dGlsLmpzXCIpO1xuXG5jb25zdCBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKTtcbmxldCBjb250ZXh0OiBhbnk7XG5QYWdlKHtcbiAgZGF0YToge1xuICAgIG1vdHRvOiBcInRvIGRvIGxpc3RcIixcbiAgICB1c2VySW5mbzoge30sXG4gICAgaGFzVXNlckluZm86IGZhbHNlLFxuICAgIGNhbklVc2U6IHd4LmNhbklVc2UoXCJidXR0b24ub3Blbi10eXBlLmdldFVzZXJJbmZvXCIpLFxuICAgIGFkZFNob3c6IGZhbHNlLFxuICAgIGFkZFRleHQ6IFwiXCIsXG4gICAgc3RhdHVzOiBcIjFcIixcbiAgICBmb2N1czogZmFsc2UsXG4gICAgbGlzdHM6IFtdIGFzIEFycmF5PHN0cmluZz4sXG4gICAgY3VyTGlzdHM6IFtdLFxuICAgIGJvb2tzOiBbXSxcbiAgICBlZGl0SW5kZXg6IDAsXG4gICAgZGVsQnRuV2lkdGg6IDEyMCxcbiAgICBjdXJEYXk6IFwiXCIsXG4gICAgYWRkVXNlckluZm86IFwiXCIsXG4gICAgc3R1ZHlTdGF0dXM6IDAsXG4gICAgbGFzdElkOiBcIlwiLFxuICAgIHVzZXJJZDogXCJcIiwgLy8g6YKA6K+356CBXG4gICAgdXNlcjJMaXN0OiBbXSxcbiAgICB1c2VyM0xpc3Q6IFtdLFxuICB9LFxuICAvLyDkuovku7blpITnkIblh73mlbBcblxuICBzdHVkeURvbmU6ICgpID0+IHtcbiAgICBjb25zdCBkYiA9IHd4LmNsb3VkLmRhdGFiYXNlKCk7XG4gICAgaWYgKGNvbnRleHQuZGF0YS5zdHVkeVN0YXR1cyA9PT0gMCkge1xuICAgICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgICAgc3R1ZHlTdGF0dXM6IDEsXG4gICAgICB9KTtcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJ0b2RvbGlzdFwiKS5hZGQoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICB1c2VySWQ6IGNvbnRleHQuZGF0YS51c2VySWQsXG4gICAgICAgICAgY3VyRGF5OiBjb250ZXh0LmRhdGEuY3VyRGF5LFxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiAocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICAgICAgbGFzdElkOiByZXNbXCJfaWRcIl0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgICAgICB0aXRsZTogXCLku4rml6XlrabkuaDmiZPljaFcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgIHRpdGxlOiBcIuWIoOmZpOS7iuWkqeeahOaJk+WNoVwiLFxuICAgICAgICBjb250ZW50OiBcIuaCqOehruWumuimgeWIoOmZpOS7iuWkqeeahOaJk+WNoeWQl++8n1wiLFxuICAgICAgICBjb25maXJtVGV4dDogXCLnoa7orqTliKDpmaRcIixcbiAgICAgICAgY2FuY2VsVGV4dDogXCLlj5bmtohcIixcbiAgICAgICAgc3VjY2VzczogKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5jb25maXJtKSB7XG4gICAgICAgICAgICBkYlxuICAgICAgICAgICAgICAuY29sbGVjdGlvbihcInRvZG9saXN0XCIpXG4gICAgICAgICAgICAgIC5kb2MoY29udGV4dC5kYXRhLmxhc3RJZClcbiAgICAgICAgICAgICAgLnJlbW92ZSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgd3guc2hvd1RvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5Yig6Zmk5oiQ5YqfXCIsXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICBzdHVkeVN0YXR1czogMCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIueUqOaIt+ehruiupOWIoOmZpFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLnlKjmiLflj5bmtojkuobmk43kvZxcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBzaG93TG9nOiAoKSA9PiB7XG4gICAgY29uc3QgZGIgPSB3eC5jbG91ZC5kYXRhYmFzZSgpO1xuICAgIGRiLmNvbGxlY3Rpb24oXCJ0b2RvbGlzdFwiKS5nZXQoe1xuICAgICAgc3VjY2VzczogKGU6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlLmRhdGEuZmlsdGVyKCh4OiBhbnkpID0+IHhbXCJ1c2VySWRcIl0gPT09IFwidGVzdCAzXCIpKTtcblxuICAgICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICAgIHVzZXIyTGlzdDogZS5kYXRhLmZpbHRlcigoeDogYW55KSA9PiB4W1widXNlcklkXCJdID09PSBcInRlc3QgMlwiKSxcbiAgICAgICAgICB1c2VyM0xpc3Q6IGUuZGF0YS5maWx0ZXIoKHg6IGFueSkgPT4geFtcInVzZXJJZFwiXSA9PT0gXCJ0ZXN0IDNcIiksXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICBiaW5kVmlld1RhcCgpIHtcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDogXCIuLi9sb2dzL2xvZ3NcIixcbiAgICB9KTtcbiAgfSxcblxuICBvbkxvYWQoKSB7XG4gICAgLy8g6L2s5YyW5YWo5bGA55qEdGhpc+aMh+WQkVxuICAgIGNvbnRleHQgPSB0aGlzO1xuXG4gICAgY29uc3QgZGIgPSB3eC5jbG91ZC5kYXRhYmFzZSgpO1xuICAgIHd4LmdldFN0b3JhZ2Uoe1xuICAgICAga2V5OiBcInVzZXJJZFwiLFxuICAgICAgc3VjY2VzczogKGU6IGFueSkgPT4ge1xuICAgICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICAgIHVzZXJJZDogZS5kYXRhLFxuICAgICAgICB9KSxcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLmRhdGEsIFwi5a2Y5YWl5pys5Zyw55qEdXNlcklkXCIpO1xuICAgICAgICBkYi5jb2xsZWN0aW9uKFwidG9kb2xpc3RcIilcbiAgICAgICAgICAud2hlcmUoeyB1c2VySWQ6IGUuZGF0YSB9KVxuICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgc3VjY2VzczogKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLCBcIuS4jeWQjOeahHVzZXJJZFwiKTtcbiAgICAgICAgICAgICAgaWYgKGUuZGF0YVtlLmRhdGEubGVuZ3RoIC0gMV1bXCJjdXJEYXlcIl0gPT09IGdldERheSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0RGF0YSh7XG4gICAgICAgICAgICAgICAgICBzdHVkeVN0YXR1czogMSxcbiAgICAgICAgICAgICAgICAgIGxhc3RJZDogZS5kYXRhW2UuZGF0YS5sZW5ndGggLSAxXVtcIl9pZFwiXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyDojrflj5bku4rlpKnnmoTml7bpl7RcbiAgICBsZXQgdGltZSA9IHV0aWwuZm9ybWF0VGltZShuZXcgRGF0ZSgpKTtcbiAgICBjb25zdCBnZXREYXkgPSB0aW1lLnNwbGl0KFwiIFwiKVswXTtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgY3VyRGF5OiBnZXREYXksXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coY29udGV4dC5jdXJEYXksIFwidG9kYXlcIik7XG5cbiAgICB3eC5nZXRTdG9yYWdlKHtcbiAgICAgIGtleTogXCJsaXN0c1wiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICAgIGNvbnRleHQuc2V0RGF0YSh7XG4gICAgICAgICAgbGlzdHM6IHJlcy5kYXRhLFxuICAgICAgICAgIGN1ckxpc3RzOiByZXMuZGF0YSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKGFwcC5nbG9iYWxEYXRhLnVzZXJJbmZvKSB7XG4gICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICB1c2VySW5mbzogYXBwLmdsb2JhbERhdGEudXNlckluZm8sXG4gICAgICAgIGhhc1VzZXJJbmZvOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuY2FuSVVzZSkge1xuICAgICAgLy8g55Sx5LqOIGdldFVzZXJJbmZvIOaYr+e9kee7nOivt+axgu+8jOWPr+iDveS8muWcqCBQYWdlLm9uTG9hZCDkuYvlkI7miY3ov5Tlm55cbiAgICAgIC8vIOaJgOS7peatpOWkhOWKoOWFpSBjYWxsYmFjayDku6XpmLLmraLov5nnp43mg4XlhrVcbiAgICAgIGFwcC51c2VySW5mb1JlYWR5Q2FsbGJhY2sgPSAocmVzKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgdXNlckluZm86IHJlcy51c2VySW5mbyxcbiAgICAgICAgICBoYXNVc2VySW5mbzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlnKjmsqHmnIkgb3Blbi10eXBlPWdldFVzZXJJbmZvIOeJiOacrOeahOWFvOWuueWkhOeQhlxuICAgICAgd3guZ2V0VXNlckluZm8oe1xuICAgICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgICAgYXBwLmdsb2JhbERhdGEudXNlckluZm8gPSByZXMudXNlckluZm87XG4gICAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIHVzZXJJbmZvOiByZXMudXNlckluZm8sXG4gICAgICAgICAgICBoYXNVc2VySW5mbzogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBnZXRVc2VySW5mbyhlOiBhbnkpIHtcbiAgICBhcHAuZ2xvYmFsRGF0YS51c2VySW5mbyA9IGUuZGV0YWlsLnVzZXJJbmZvO1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICB1c2VySW5mbzogZS5kZXRhaWwudXNlckluZm8sXG4gICAgICBoYXNVc2VySW5mbzogdHJ1ZSxcbiAgICB9KTtcbiAgfSxcblxuICBhZGRUb2RvU2hvdzogKCkgPT4ge1xuICAgIGNvbnRleHQuc2V0RGF0YSh7XG4gICAgICBhZGRTaG93OiB0cnVlLFxuICAgICAgZm9jdXM6IHRydWUsXG4gICAgfSk7XG4gIH0sXG5cbiAgYWRkVG9kbzogKCkgPT4ge1xuICAgIGlmICghY29udGV4dC5kYXRhLmFkZFRleHQudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0ZW1wID0gY29udGV4dC5kYXRhLmxpc3RzO1xuICAgIGxldCBhZGRUOiBhbnkgPSB7XG4gICAgICBpZDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICB0aXRsZTogY29udGV4dC5kYXRhLmFkZFRleHQsXG4gICAgICBzdGF0dXM6IFwiMFwiLFxuICAgIH07XG4gICAgdGVtcC5wdXNoKGFkZFQpO1xuICAgIGNvbnRleHQuc2hvd0N1cih0ZW1wKTtcbiAgICBjb250ZXh0LmFkZFRvZG9IaWRlKCk7XG4gICAgd3guc2V0U3RvcmFnZSh7XG4gICAgICBrZXk6IFwibGlzdHNcIixcbiAgICAgIGRhdGE6IHRlbXAsXG4gICAgfSk7XG4gICAgd3guc2hvd1RvYXN0KHtcbiAgICAgIHRpdGxlOiBcIua3u+WKoOaIkOWKnyEgMjNcIixcbiAgICAgIGljb246IFwic3VjY2Vzc1wiLFxuICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgfSk7XG4gIH0sXG5cbiAgYWRkVG9kb0hpZGU6ICgpID0+IHtcbiAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgYWRkU2hvdzogZmFsc2UsXG4gICAgICBmb2N1czogZmFsc2UsXG4gICAgICBhZGRUZXh0OiBcIlwiLFxuICAgIH0pO1xuICB9LFxuXG4gIHNob3dDdXI6IChkYXRhOiBhbnkpID0+IHtcbiAgICBpZiAoZGF0YS5zdGF0dXMgPT09IFwiMVwiKSB7XG4gICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICBsaXN0czogZGF0YSxcbiAgICAgICAgY3VyTGlzdHM6IGRhdGEsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgICAgbGlzdHM6IGRhdGEsXG4gICAgICAgIGN1ckxpc3RzOiBkYXRhLmZpbHRlcihcbiAgICAgICAgICAoaXRlbTogYW55KSA9PiAraXRlbS5zdGF0dXMgPT09IGNvbnRleHQuZGF0YS5zdGF0dXMgLSAyXG4gICAgICAgICksXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgY2hhbmdlVG9kbzogKGU6IGFueSkgPT4ge1xuICAgIGxldCBpdGVtID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbTtcbiAgICBsZXQgdGVtcCA9IGNvbnRleHQuZGF0YS5saXN0cztcbiAgICB0ZW1wLmZvckVhY2goKGVsOiBhbnkpID0+IHtcbiAgICAgIGlmIChlbC5pZCA9PT0gaXRlbSkge1xuICAgICAgICBpZiAoZWwuc3RhdHVzID09PSBcIjBcIikge1xuICAgICAgICAgIGVsLnN0YXR1cyA9IFwiMVwiO1xuICAgICAgICAgIGNvbnRleHQuc2hvd0N1cih0ZW1wKTtcbiAgICAgICAgICB3eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICAgIGtleTogXCJsaXN0c1wiLFxuICAgICAgICAgICAgZGF0YTogdGVtcCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6IFwi5bey5a6M5oiQ5Lu75YqhXCIsXG4gICAgICAgICAgICBpY29uOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICB0aXRsZTogXCJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwi6K+l5Lu75Yqh5bey5a6M5oiQ77yM56Gu5a6a6YeN5paw5byA5aeL5Lu75Yqh77yfXCIsXG4gICAgICAgICAgICBjb25maXJtVGV4dDogXCLnoa7lrppcIixcbiAgICAgICAgICAgIGNhbmNlbFRleHQ6IFwi5LiN5LqGXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuY29uZmlybSkge1xuICAgICAgICAgICAgICAgIGVsLnN0YXR1cyA9IFwiMFwiO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2hvd0N1cih0ZW1wKTtcbiAgICAgICAgICAgICAgICB3eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICAgICAgICAgIGtleTogXCJsaXN0c1wiLFxuICAgICAgICAgICAgICAgICAgZGF0YTogdGVtcCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCLkuI3mk43kvZxcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgfSxcblxuICBzZXRJbnB1dDogKGU6IGFueSkgPT4ge1xuICAgIGNvbnRleHQuc2V0RGF0YSh7XG4gICAgICBhZGRUZXh0OiBlLmRldGFpbC52YWx1ZSxcbiAgICB9KTtcbiAgfSxcblxuICBzZXRVc2VyOiAoZTogYW55KSA9PiB7XG4gICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgIGFkZFVzZXJJbmZvOiBlLmRldGFpbC52YWx1ZSxcbiAgICB9KTtcbiAgfSxcblxuICBhZGRVc2VyOiAoKSA9PiB7XG4gICAgY29uc3QgZGIgPSB3eC5jbG91ZC5kYXRhYmFzZSgpO1xuICAgIGNvbnNvbGUubG9nKGNvbnRleHQuZGF0YS5hZGRVc2VySW5mbyk7XG4gICAgaWYgKGNvbnRleHQuZGF0YS5hZGRVc2VySW5mbyA9PT0gXCJ0ZXN0IDJcIilcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJ0b2RvbGlzdFwiKS5hZGQoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb3BlbmlkOiBjb250ZXh0LmRhdGEuYWRkVXNlckluZm8sXG4gICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICBjdXJEYXk6IGNvbnRleHQuZGF0YS5jdXJEYXksXG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6IFwi6YKA6K+356CB6aqM6K+B5oiQ5YqfXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIOeEtuWQjumhtemdoui3s+i9rOWIsOeZu+W9leeKtuaAgVxuICAgICAgfSk7XG4gIH0sXG5cbiAgc2hvd1N0YXR1czogKGU6IGFueSkgPT4ge1xuICAgIHZhciBzdCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnN0YXR1cztcbiAgICBpZiAoY29udGV4dC5kYXRhLnN0YXR1cyA9PT0gc3QpIHJldHVybjtcbiAgICBpZiAoc3QgPT09IFwiMVwiKSB7XG4gICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICBzdGF0dXM6IHN0LFxuICAgICAgICBjdXJMaXN0czogY29udGV4dC5kYXRhLmxpc3RzLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRleHQuc2V0RGF0YSh7XG4gICAgICBzdGF0dXM6IHN0LFxuICAgICAgY3VyTGlzdHM6IGNvbnRleHQuZGF0YS5saXN0cy5maWx0ZXIoXG4gICAgICAgIChpdGVtOiBhbnkpID0+ICtpdGVtLnN0YXR1cyA9PT0gc3QgLSAyXG4gICAgICApLFxuICAgIH0pO1xuICB9LFxuXG4gIGRlbFRvZG86IChlOiBhbnkpID0+IHtcbiAgICBsZXQgaXRlbSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW07XG4gICAgbGV0IHRlbXAgPSBjb250ZXh0LmRhdGEubGlzdHM7XG4gICAgdGVtcC5mb3JFYWNoKChlbDogYW55LCBpbmRleDogYW55KSA9PiB7XG4gICAgICBpZiAoZWwuaWQgPT09IGl0ZW0pIHtcbiAgICAgICAgdGVtcFtpbmRleF0udHh0U3R5bGUgPSBcImxlZnQ6MFwiO1xuICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgIHRpdGxlOiBcIlwiLFxuICAgICAgICAgIGNvbnRlbnQ6IFwi5oKo56Gu5a6a6KaB5Yig6Zmk5ZCX77yfXCIsXG4gICAgICAgICAgY29uZmlybVRleHQ6IFwi56Gu5a6aXCIsXG4gICAgICAgICAgY2FuY2VsVGV4dDogXCLogIPomZHkuIDkuItcIixcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmNvbmZpcm0pIHtcbiAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICBjb250ZXh0LnNob3dDdXIodGVtcCk7XG4gICAgICAgICAgICAgIHd4LnNldFN0b3JhZ2Uoe1xuICAgICAgICAgICAgICAgIGtleTogXCJsaXN0c1wiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRlbXAsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGV4dC5zaG93Q3VyKHRlbXApO1xuICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCLkuI3mk43kvZxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgdG91Y2hTOiAoZTogYW55KSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ+W8gOWni++8micgKyBKU09OLnN0cmluZ2lmeShlKSlcbiAgICAvLyDmmK/lkKblj6rmnInkuIDkuKrop6bmkbjngrlcbiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgICAgLy8g6Kem5pG46LW35aeL55qEWOWdkOagh1xuICAgICAgICBzdGFydFg6IGUudG91Y2hlc1swXS5jbGllbnRYLFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHRvdWNoTTogKGU6IGFueSkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKCfnp7vliqjvvJonICsgSlNPTi5zdHJpbmdpZnkoZSkpXG4gICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIC8vIOinpuaRuOeCueeahFjlnZDmoIdcbiAgICAgIHZhciBtb3ZlWCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgLy8g6K6h566X5omL5oyH6LW35aeL54K555qEWOWdkOagh+S4juW9k+WJjeinpuaRuOeCueeahFjlnZDmoIfnmoTlt67lgLxcbiAgICAgIHZhciBkaXNYID0gY29udGV4dC5kYXRhLnN0YXJ0WCAtIG1vdmVYO1xuICAgICAgLy8gZGVsQnRuV2lkdGgg5Li65Y+z5L6n5oyJ6ZKu5Yy65Z+f55qE5a695bqmXG4gICAgICB2YXIgZGVsQnRuV2lkdGggPSBjb250ZXh0LmRhdGEuZGVsQnRuV2lkdGg7XG4gICAgICB2YXIgdHh0U3R5bGUgPSBcIlwiO1xuICAgICAgaWYgKGRpc1ggPT0gMCB8fCBkaXNYIDwgMCkge1xuICAgICAgICAvLyDlpoLmnpznp7vliqjot53nprvlsI/kuo7nrYnkuo4w77yM5paH5pys5bGC5L2N572u5LiN5Y+YXG4gICAgICAgIHR4dFN0eWxlID0gXCJsZWZ0OjBcIjtcbiAgICAgIH0gZWxzZSBpZiAoZGlzWCA+IDApIHtcbiAgICAgICAgLy8g56e75Yqo6Led56a75aSn5LqOMO+8jOaWh+acrOWxgmxlZnTlgLznrYnkuo7miYvmjIfnp7vliqjot53nprtcbiAgICAgICAgdHh0U3R5bGUgPSBcImxlZnQ6LVwiICsgZGlzWCArIFwicnB4XCI7XG4gICAgICAgIGlmIChkaXNYID49IGRlbEJ0bldpZHRoKSB7XG4gICAgICAgICAgLy8g5o6n5Yi25omL5oyH56e75Yqo6Led56a75pyA5aSn5YC85Li65Yig6Zmk5oyJ6ZKu55qE5a695bqmXG4gICAgICAgICAgdHh0U3R5bGUgPSBcImxlZnQ6LVwiICsgZGVsQnRuV2lkdGggKyBcInJweFwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyDojrflj5bmiYvmjIfop6bmkbjnmoTmmK/lk6rkuIDkuKppdGVtXG4gICAgICB2YXIgaW5kZXggPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleDtcbiAgICAgIHZhciBsaXN0ID0gY29udGV4dC5kYXRhLmN1ckxpc3RzO1xuICAgICAgLy8g5bCG5ou85o6l5aW955qE5qC35byP6K6+572u5Yiw5b2T5YmNaXRlbeS4rVxuICAgICAgbGlzdFtpbmRleF0udHh0U3R5bGUgPSB0eHRTdHlsZTtcbiAgICAgIC8vIOabtOaWsOWIl+ihqOeahOeKtuaAgVxuICAgICAgY29udGV4dC5zZXREYXRhKHtcbiAgICAgICAgY3VyTGlzdHM6IGxpc3QsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgdG91Y2hFOiAoZTogYW55KSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ+WBnOatou+8micgKyBKU09OLnN0cmluZ2lmeShlKSlcbiAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIC8vIOaJi+aMh+enu+WKqOe7k+adn+WQjuinpuaRuOeCueS9jee9rueahFjlnZDmoIdcbiAgICAgIHZhciBlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgLy8g6Kem5pG45byA5aeL5LiO57uT5p2f77yM5omL5oyH56e75Yqo55qE6Led56a7XG4gICAgICB2YXIgZGlzWCA9IGNvbnRleHQuZGF0YS5zdGFydFggLSBlbmRYO1xuICAgICAgdmFyIGRlbEJ0bldpZHRoID0gY29udGV4dC5kYXRhLmRlbEJ0bldpZHRoO1xuICAgICAgLy8g5aaC5p6c6Led56a75bCP5LqO5Yig6Zmk5oyJ6ZKu55qEMS8y77yM5LiN5pi+56S65Yig6Zmk5oyJ6ZKuXG4gICAgICB2YXIgdHh0U3R5bGUgPVxuICAgICAgICBkaXNYID4gZGVsQnRuV2lkdGggLyAyID8gXCJsZWZ0Oi1cIiArIGRlbEJ0bldpZHRoICsgXCJycHhcIiA6IFwibGVmdDowXCI7XG4gICAgICAvLyDojrflj5bmiYvmjIfop6bmkbjnmoTmmK/lk6rkuIDpoblcbiAgICAgIHZhciBpbmRleCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xuICAgICAgdmFyIGxpc3QgPSBjb250ZXh0LmRhdGEuY3VyTGlzdHM7XG4gICAgICBsaXN0W2luZGV4XS50eHRTdHlsZSA9IHR4dFN0eWxlO1xuICAgICAgLy8g5pu05paw5YiX6KGo55qE54q25oCBXG4gICAgICBjb250ZXh0LnNldERhdGEoe1xuICAgICAgICBjdXJMaXN0czogbGlzdCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbn0pO1xuIl19